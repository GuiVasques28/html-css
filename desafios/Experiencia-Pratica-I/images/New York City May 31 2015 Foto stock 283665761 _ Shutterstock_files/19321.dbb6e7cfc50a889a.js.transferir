"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19321],{20209:(e,t,r)=>{r.d(t,{$:()=>d});var a=r(924247),o=r(910163),n=r(513800),s=r(854898),i=r(600538);let d=({queryParams:e={},shouldFetch:t=!0}={})=>{let r=(0,a.uy)({queryParams:e}).formattedUrl;return(0,i.I)((0,o.Rt)({enabled:t,queryKey:["getUserPaymentProfiles",r],queryFn:()=>n.Bn.get(r).then(e=>(0,s.A)(e.data))}))}},119321:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>g});var a=r(424629),o=r(33301),n=r(558132),s=r(213370),i=r(428507),d=r(800626),l=r(417594),u=r(937131);let c=({price:e,resolution:t})=>{let{t:r}=(0,u.Bd)(l.sVY);return r("video_otp_primary_cta_dynamic_label",{PRICE:e,RESOLUTION:t?.toUpperCase()})};var m=r(816243),p=r(729727),y=r(864983),f=r(656740),h=r(438704),C=r(712633),N=r(82708);let g=({asset:e,assetSizeStateId:t,assetType:r,buttonConfig:l={showIcon:!0,variant:"contained",color:"secondary",style:{marginBottom:"8px"}},clickAnalyticsLabel:u,clickAnalyticsLabelMap:g,label:b,orderFlow:w=y.Y.UNLIMITED_CONVERSION_PANEL,product:v,productStateId:P,setStateOnLoggedOutClick:O,termsCheckboxStateId:k,shouldUseSignupModal:_=!0,showDynamicLabelForOtpCta:A=!1,dataAutomation:I})=>{let E=(0,C.i9)(),{setStates:M}=(0,i.h6)(),U=(0,i.Cw)(t),x=(0,i.Cw)(k??"")??!0,S=(0,i.Cw)(P??"")??v,R=(0,d.YH)(e,r,S),D=(0,h.Up)({product:S}),F=c({resolution:U?.resolution,price:D}),L=(0,m.T)({disableEntryPoint:!1}),z=(0,p.o)({disableEntryPoint:!1}),T={orderFlow:w,productType:s.PZ,asset:e,productOverride:S,shouldForceAsset:!0,assetSize:U,license:R},{getCreateOrderHandler:H,isCreateOrderInProgress:Y,createOrderHandlerLoading:Z}=(0,f.X)(T),B=Y||Z||!x,j=A?F:b;return(0,a.jsxs)(n.$n,{"aria-label":j,disabled:B,fullWidth:!0,onClick:()=>{let{isEligibleForCon64AnonymousCheckoutExperiment:e}=L();z();let{createOrderHandler:t}=H({isEligibleForAnonCheckout:e});E||!_||e?t():M(O)},labelTrack:g?.[S?.name||""]||u,variant:l.variant,color:l.color,style:l.style,"data-automation":I,children:[Y&&(0,a.jsx)(o.A,{color:"inherit",size:24,style:{position:"absolute"}}),l.showIcon&&(0,a.jsx)(N.Download,{style:{padding:"2px",marginRight:"4px"}}),j]})}},172616:(e,t,r)=>{r.d(t,{m:()=>c});var a=r(991418),o=r(615539),n=r(960608),s=r(680904),i=r(28071),d=r(214693);let l=({assetType:e,productName:t,utmMedium:r,region:a,inUnlimitedExperience:o})=>{let l=!t||[s.keR,s.lcL,...s.gnm,...s.BfY].includes(t),u=!e||e===i.W1,c=d.rK.includes(r??"");return!!(a===n.u3&&!c&&!o&&l&&u)};var u=r(889761);let c=({productName:e,assetType:t})=>{let r=(0,u.H)(),{region:n}=(0,a.Y)(),{utmMedium:s}=(0,o.Y)();return l({productName:e,utmMedium:s,inUnlimitedExperience:r,region:n,assetType:t})}},223524:(e,t,r)=>{r.d(t,{IS:()=>o,Uj:()=>a,r4:()=>n,rK:()=>s});let a="INR",o="Test",n="IN",s=["cpc","acq_display","email","affiliate"]},306028:(e,t,r)=>{r.d(t,{y:()=>l});var a=r(991418),o=r(615539),n=r(680904),s=r(28071),i=r(223524);let d=({assetType:e,productName:t,utmMedium:r,region:a})=>{let o=!t||[n.keR,n.lcL,...n.gnm,...n.BfY].includes(t),d=!e||e===s.W1,l=i.rK.includes(r??"");return!!(a===i.r4&&!l&&o&&d)},l=({productName:e,assetType:t})=>{let{region:r}=(0,a.Y)(),{utmMedium:n}=(0,o.Y)();return d({productName:e,utmMedium:n,region:r,assetType:t})}},321155:(e,t,r)=>{r.d(t,{NM:()=>_,fS:()=>O,Z5:()=>w});var a=r(924247),o=r(36073),n=r(680904),s=r(242548),i=r(513006),d=r(381532),l=r(28071),u=r(213370),c=r(977474);let m=(e,t=!1)=>{let r,[a]=e,{media:o,...s}=a,i=o?.[0]||{};switch(i.type){case l.W1:r=`${n.lcL}-var-0004`;break;case l.FY:r=c.eJ;break;case l.M9:r=c.Xs;break;case l.G_:r=n.t8m[i.size],t&&(r=n.fV_);break;default:return e}return[{...s,media:[]},{product:{id:r,type:u.Uy},media:[i]}]};var p=r(732580),y=r(639566);let f=()=>(0,y.l)(p.ju[n.uyi]);var h=r(678540),C=r(513800),N=r(854898);let g="production"!==r(541503).env.NODE_CONFIG_ENV,b=e=>{switch(e.paymentMethod){case o.L2:return{paymentId:e.id,expirationMonth:e?.creditCard?.expMonth,expirationYear:e?.creditCard?.expYear,maskedNumber:e?.creditCard?.maskedNumber,cardType:e?.creditCard?.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.RD:return{paymentId:e.id,bic:e?.sepaDirectDebit?.bic,maskedIBAN:e?.sepaDirectDebit?.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case o.ON:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},w=({paymentProfiles:e=[]})=>Array.isArray(e)&&0!==e.length?b(e.find(e=>!0===e.isDefault)||e[0]):null,v=({orderItems:e=[],license:t,country:r="",debitableIdentifier:a,selectedShadowsOption:c,isClickToCancelARGateEnabled:m=!1})=>e.map(e=>{let{product:{id:p,eligibleForRebilling:y,seatCount:f,name:C=""}={},productType:N,assets:g,paymentMethod:b,subscriptionIdentifier:w,cancellationReason:v,cancellationReasonName:P}=e,O=w&&v?{subscription_identifier:w,cancellation_reason:v,...P&&{cancellation_reason_name:P}}:{},k=[];return f&&(O.seat_count=f),b?.type!==o.gU&&(O.subscription_id=b?.id),g?.length&&(k=g.map(({asset:e,selectedAssetSize:r})=>{let a=(0,h.Ub)(e),o=(0,h.OJ)(e);return{type:a,id:e.id,license:t,...o&&{format:d.mx,size:d.mx,headline:e.title},...r?.size&&{size:r.size},...r?.format&&{format:r.format},...a===l.W1&&e.imageType===l.m$&&{angle:e.angle||s.R,content_provider:l._Y,...r?.format!==i.yC&&{include_shadows:"on"===(c||"on").toLocaleLowerCase()}}}})),O.auto_renewal=y&&N===u.PZ&&!n.F7K.includes(r)&&!n.KGB.includes(C),n.MA.includes(C)&&(O.auto_renewal=N===u.PZ&&!n.F7K.includes(r)),O.debitable_identifier=a,m&&n.Khw.includes(C)&&(O.auto_refill=!1),{product:{id:p,type:N||u.Uy},...k&&{media:k},...Object.keys(O).length>0&&{meta:O}}}),P=({currency:e,country:t,paymentProfileId:r,items:a,couponCode:o,vatNumber:n,promotions:s})=>({data:{type:"orders",attributes:{currency:e,items:a,country:t,payment_profile_id:r,coupons:o?[{type:"coupon",name:"coupon",coupon_code:o}]:[],client_data:{},vat_override:n||void 0,...s&&{promotions:s}}}}),O=async({country:e,couponCode:t,currency:r,orderItems:o=[],selectedShadowsOption:n,paymentProfileId:s,vatNumber:i,configs:d={},license:l=u.sU,debitableIdentifier:c,promotions:p,isEligibleForUnlimitedBogoPromotion:y=!1,isClickToCancelARGateEnabled:h=!1,isFootageSelect:b=!1})=>{let w=v({orderItems:o,license:l,country:e,debitableIdentifier:c,selectedShadowsOption:n,isClickToCancelARGateEnabled:h});y&&(w=m(w,b));let O=(0,a._u)().formattedUrl,k=P({country:e,couponCode:t,promotions:y?f():p,currency:r,items:w,paymentProfileId:s,vatNumber:i});return C.Bn.post(O,k,{...d,...g&&{timeout:3e4}}).then(e=>({headers:e.headers,data:(0,N.A)(e.data)}))},k=({orderItems:e=[],country:t="",debitableIdentifier:r})=>e.map(e=>{let{product:{id:a,license:s,name:i="",productType:l,eligibleForRebilling:c,seatCount:m}={},assets:p,paymentMethod:y}=e,f={...m&&{seat_count:m},...y?.type!==o.gU&&{subscription_id:y?.id}},C=[];return p?.length&&(C=p.map(({asset:e,selectedAssetSize:t})=>{let r=(0,h.OJ)(e);return{type:(0,h._$)(e),id:e.id,license:s,...r&&{format:d.mx,size:d.mx,headline:e.title},...t?.size&&{size:t.size},...t?.format&&{format:t.format}}})),f.auto_renewal=c&&l===u.PZ&&!n.F7K.includes(t)&&!n.KGB.includes(i),f.debitable_identifier=r,{product:{id:a,type:l||u.Uy},...C&&{media:C},...Object.keys(f).length>0&&{meta:f}}}),_=async({country:e,currency:t,orderItems:r,paymentProfileId:o,vatNumber:n,configs:s={},debitableIdentifier:i,promotions:d})=>{let l=k({orderItems:r,country:e,debitableIdentifier:i}),u=(0,a._u)().formattedUrl,c=P({country:e,currency:t,items:l,paymentProfileId:o,vatNumber:n,promotions:d}),m=await C.Bn.post(u,c,{...s,...g&&{timeout:3e4}});return{headers:m.headers,data:(0,N.A)(m.data)}}},428507:(e,t,r)=>{r.d(t,{kN:()=>l,h6:()=>p,$w:()=>m,Cw:()=>c});var a=r(424629),o=r(467889);let n=(e,t)=>(0,o.y)()(r=>({...e,analytics:{...t},actions:{setStates:e=>r(t=>({...t,...e})),setState:(e,t)=>r(r=>({...r,[e]:t}))}}));var s=r(330633),i=r(565317);let d=(0,s.createContext)(null),l=e=>{let{children:t,initialState:r,analytics:o}=e,[i]=(0,s.useState)(()=>n(r,o));return(0,a.jsx)(d.Provider,{value:i,children:t})},u=e=>{let t=(0,s.useContext)(d);if(!t)throw Error("useConversionPanelStore must be used within CounterStoreProvider");return(0,i.P)(t,e)},c=e=>u(t=>t[e]),m=()=>u(e=>e.analytics?.planViewed),p=()=>u(e=>e.actions)},438704:(e,t,r)=>{r.d(t,{JA:()=>h,Up:()=>y,Z0:()=>f,bV:()=>N,eb:()=>C,kI:()=>p,wb:()=>c});var a=r(398661),o=r(737578),n=r(188808),s=r(991418),i=r(566099),d=r(65776),l=r(222851),u=r(330633);let c=({prices:e,name:t,forceLocaleCurrency:r})=>{let{currencyData:{currency:o=a.OS}}=(0,s.Y)(),n=(0,i.H)({productName:t,currency:o});return(0,d.zn)({prices:e,localeCurrency:n,forceLocaleCurrency:r})},m=({basePrice:e,pricePerSeat:t,seatCount:r})=>e?e+t*r:NaN,p=({product:e})=>{let{prices:t={},pricesPerSeat:r={},seatCount:a,downloadCredits:o,allotmentCredits:n,commitmentLength:s,name:i}=e,d=c({prices:t,name:i}),u=t[d?.toLowerCase()]??NaN,p=r[d?.toLowerCase()]??NaN,y=u,f=n||o;return p&&a&&(y=m({basePrice:u,pricePerSeat:p,seatCount:a})),(0,l.f)(y/(f&&1===s?12*f:f||1),d)??void 0},y=({product:e,promotion:t=0,getAnnualPriceDividedByMonth:r=!1})=>{let{prices:a={},pricesPerSeat:o={},seatCount:n,name:s}=e||{},i=c({prices:a,name:s}),u=a[i?.toLowerCase()]??NaN,p=o[i?.toLowerCase()],y=u;return t>0&&(y=Math.round(u*(1-t))),r&&(0,d.Fj)({product:e||{}})&&(y=Math.ceil(Number(a[i?.toLowerCase()]??NaN)/12*100)/100),p&&n&&(y=m({basePrice:u,pricePerSeat:p,seatCount:n})),(0,l.f)(y,i)},f=({activeTab:e,productGroup:t,productToCompare:r=n.XN})=>{let{prices:a}={prices:{}},o=c({prices:a}),{products:s={}}=t,i=s[e],d=12*(i?.[r]?.prices?.[o?.toLowerCase()]??NaN)-(i?.[n.Ww]?.prices?.[o?.toLowerCase()]??NaN),u=(0,l.f)(d,o);return d>0?u:null},h=({product:e,downloadsPerMonth:t,discountPercentage:r=0,selectedProductLicenseType:a=""})=>{let n=c({prices:e?.prices??{},name:e?.name}),{pricePerPaymentInterval:s,pricePerMonth:i,pricePerAsset:m,pricePerAssetDiscounted:p,priceDiscounted:y}=(0,u.useMemo)(()=>{let s=(0,d.f8)({product:e??{}}),i=(0,d.Eu)({product:e}),l=a===o.ZI1,u=2*!["KRW","JPY"].includes(n),c=(0,d.Fj)({product:e??{}}),m=c&&!i?12:1,p=e?.prices?.[n.toLowerCase()]??NaN,y=p-p/100*r,f=c?(p/12).toFixed(u):p,h=l?(e?.allotmentCredits||0)/20:e?.allotmentCredits??NaN,C=(p/m/((s?h:e?.allotmentCredits)??NaN)).toFixed(u),N=r?(y/m/(e?.allotmentCredits??t??NaN)).toFixed(u):C;return{priceDiscounted:y,pricePerMonth:f,pricePerAsset:C,pricePerAssetDiscounted:N,pricePerPaymentInterval:p}},[n,t,e,r,a]);return{pricePerAsset:m,formattedPricePerPaymentInterval:(0,l.f)(s,n),formattedPricePerMonth:(0,l.f)(i,n),formattedPricePerAsset:(0,l.f)(m,n),formattedPricePerAssetDiscounted:(0,l.f)(p,n),formattedPriceDiscounted:(0,l.f)(y,n)}},C=({product:e,singleClipProduct:t})=>{let{prices:r,allotmentCredits:a}=e,o=c({prices:r}),n=r[o.toLowerCase()]??NaN,s=t?.prices?.[o.toLowerCase()]??NaN,i=(n/(a??NaN)).toFixed(2),d=((s-parseFloat(i))*(a??NaN)).toFixed(0);return{formattedPackagePrice:(0,l.f)(n,o),formattedPricePerAsset:(0,l.f)(i,o),formattedSaveAmount:(0,l.f)(d,o)}},N=({prices:e={},commitmentRemaining:t=0})=>{let r=c({prices:e}),a=e[r?.toLowerCase()]??NaN;return{monthlyPrice:(0,l.f)(a,r),totalRemainingPrice:(0,l.f)(a*t,r)}}},466809:(e,t,r)=>{r.d(t,{N:()=>s});var a=r(680904),o=r(439001);let n=[{condition:({assets:e,checkGate:t})=>(e?.some(({product:e})=>e?.name===a.rVp)??!1)&&(t?.(o.gx)??!1)},{condition:({product:e,checkGate:t})=>e?.name===a.rVp&&(t?.(o.gx)??!1)},{condition:({product:e})=>!!e?.promotions}],s=({assets:e,product:t,checkGate:r})=>n.some(a=>a.condition({assets:e,product:t,checkGate:r}))},566099:(e,t,r)=>{r.d(t,{H:()=>c});var a=r(498590),o=r(223524),n=r(306028),s=r(648903);let i=({assetType:e,currency:t,productName:r})=>{let{getExperiment:i}=(0,s.U)();return(0,n.y)({productName:r,assetType:e})&&i(a.f.indiaPriceTest).groupName===o.IS?o.Uj:t};var d=r(214693),l=r(172616);let u=({assetType:e,currency:t,productName:r})=>{let{getExperiment:o}=(0,s.U)();return(0,l.m)({productName:r,assetType:e})&&o(a.f.canadaPriceTest).groupName===d.IS?d.BJ:t},c=({assetType:e,currency:t,productName:r})=>{let a=i({currency:t,assetType:e,productName:r}),o=u({currency:t,assetType:e,productName:r});return o!==t?o:a!==t?a:t}},639566:(e,t,r)=>{r.d(t,{l:()=>o});var a=r(607010).Buffer;let o=e=>{let t=JSON.stringify(e);return a.from(t).toString("base64")}},656740:(e,t,r)=>{r.d(t,{X:()=>v});var a=r(341573),o=r(439001),n=r(50432),s=r(213370),i=r(991418),d=r(232885),l=r(321155),u=r(65776),c=r(678540),m=r(762705),p=r(438704),y=r(727973),f=r(712542),h=r(648903),C=r(330633);let N=({asset:e,assetSize:t,couponCode:r,license:N,products:g,productId:b,productOverride:w,productType:v=s.PZ,setCreateOrderStatus:P,setIsInvalidCoupon:O,forceLocaleCurrency:k=!1})=>{let{region:_}=(0,i.Y)(),A=(0,f.o)(),[I,E]=(0,C.useState)(!1),M=(0,C.useMemo)(()=>w??{...(0,u.eO)(g,b)},[w,b,g]),U=(0,p.wb)({prices:M?.prices??{},forceLocaleCurrency:k}),{checkGate:x}=(0,h.U)(),S=x(o.M5),R=(0,C.useCallback)(e=>{let t={component:"useCreateAnonymousOrder.ts",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateAnonymousOrder",errorTitle:e.title,msg:"CON-21: Anonymous order creation failed",referrerPath:window.location.pathname,referrerQuery:window.location.search,anonymousId:A};window.NREUM?.noticeError?.(e,t)},[A]),D=(0,m.J)({couponCode:r}),F=(0,y.h)(),[L,z]=(0,C.useState)({status:"",error:void 0});return{createOrderHandler:(0,C.useCallback)(async()=>{try{P?.({status:"",error:void 0}),z({status:"",error:void 0}),E(!0);let o=e?{assets:[{asset:e,selectedAssetSize:(0,d.aZ)({assetType:(0,c.f0)(e),assetSize:t})}]}:{},s=[];s.push({...o,product:M,productType:v});let{data:i}=await (0,l.fS)({country:_,currency:U,orderItems:s,couponCode:r,license:N,isClickToCancelARGateEnabled:S,configs:{headers:{[n.DF]:A,[n.s4]:n.o}}});P?.({status:a.qO,error:void 0}),z({status:a.qO,error:void 0}),E(!1),D({orderId:`shutterstock.${i.id}`}),F({actionName:"CON-64 - anonymous order creation success",customAttributes:{productName:M.name,productType:v,country:_,currency:U,assetType:(0,c.f0)(e),assetSize:t,license:N}}),E(!1)}catch(e){P?.({status:a.Nz,error:e}),z({status:a.Nz,error:e}),E(!1),e?.detail?.toLowerCase()===s.s_&&O?.(!0),R(e)}},[A,e,t,r,_,U,S,N,M,v,F,D,R,P,O]),isCreateOrderInProgress:I,product:M,orderStatus:L}};var g=r(466809),b=r(712633),w=r(733571);let v=e=>{let{assets:t=[],cartItemsCount:r,isCartOrder:a,...o}=e,n=(0,b.i9)(),{checkGate:s}=(0,h.U)(),i=(0,g.N)({assets:a?t:void 0,product:a?void 0:o.productOverride,checkGate:s}),d=r&&r>15,l=(0,C.useMemo)(()=>({...o,asset:t[0]?.mediaItem||o.asset}),[o,t]),u=(0,w.s)(l),c=N(l),m=u.isCreateOrderInProgress||c.isCreateOrderInProgress||e.standardMultiOrderHookResult?.isCreateOrderInProgress||e.anonymousMultiOrderHookResult?.isCreateOrderInProgress,p=(0,C.useCallback)(({isEligibleForAnonCheckout:t})=>n||!t?a?e.standardMultiOrderHookResult:u:a?d||i?e.standardMultiOrderHookResult:e.anonymousMultiOrderHookResult:i?u:c,[n,a,i,c,u,d,e.anonymousMultiOrderHookResult,e.standardMultiOrderHookResult]);return{getCreateOrderHandler:(0,C.useCallback)(({isEligibleForAnonCheckout:e=!1})=>({createOrderHandler:p({isEligibleForAnonCheckout:e}).createOrderHandler}),[p]),isCreateOrderInProgress:m,hasActivePromos:i,cartSizeExceedsAnonymousLimit:d,createOrderHandlerLoading:u.createOrderHandlerLoading}}},729727:(e,t,r)=>{r.d(t,{o:()=>l});var a=r(193581),o=r(498590),n=r(332546),s=r(648903),i=r(946887),d=r(330633);let l=({disableEntryPoint:e=!0}={})=>{let{getExperiment:t}=(0,s.U)(),{anonymousId:r}=(0,n.pn)();return(0,d.useCallback)(()=>{let n=i.A.get(a.g_),s=i.A.get("accts_customer_sso1"),d=i.A.get("shared");return s||d||!n||n!==r?void window.NREUM?.addPageAction("FAE-1531 exclude users how might have existing products but havent logged in",{anonymousIdDataLayer:r,anonymousIdCookie:n,wasLoggedIn:s,wasLikelyToGetKickedOut:d,hasAccountSharedBefore:!!d}):(t(o.f.aaOnCheckout),e)?{isEligibleForCon64AnonymousCheckoutExperiment:"control"}:void t(o.f.aaOnCheckoutDisabledEntryPoint)},[r,t,e])}},733571:(e,t,r)=>{r.d(t,{s:()=>H});var a=r(680904),o=r(341573),n=r(193581),s=r(439001),i=r(50432),d=r(732580),l=r(213370),u=r(991418),c=r(232885),m=r(321155),p=r(65776),y=r(762364),f=r(678540),h=r(796955),C=r(712633);let N=({asset:e,productName:t,isBogoPromotionActive:r=!1})=>{let o=(0,h.J)(),n=(0,C.i9)(),s=(0,f.sY)(e);return(o?.isFBA||!n)&&!s&&r&&t===a.uyi};var g=r(639566),b=r(637758),w=r(319305),v=r(20209),P=r(762705),O=r(438704),k=r(946267),_=r(288829),A=r(727973),I=r(712542),E=r(559413),M=r(332546),U=r(343270),x=r(648903),S=r(647588);let{NODE_CONFIG_ENV:R}=r(541503).env,D=()=>{let e=(0,S.NF)()?"production":"qa";switch(R||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}};var F=r(863735),L=r(946887),z=r(859478),T=r(330633);let H=({products:e,asset:t,assetSize:r,couponCode:h,productId:S,productType:R=l.PZ,productOverride:H,seatCount:Y,setCreateOrderStatus:Z,setIsInvalidCoupon:B,vatNumber:j,license:J,isLicenseDrawer:V=!1,preset:q,eligibilityData:K={},existingUserRedirectPath:G,selectedShadowsOption:$,shouldForceAsset:W=!1,subscriptionIdentifier:X,cancellationReason:Q,additionalCheckoutQueryParams:ee,orderFlow:et,checkoutAction:er,forceLocaleCurrency:ea=!1})=>{let{region:eo}=(0,u.Y)(),{isIndiaRegion:en}=(0,_.Z)(),{data:es}=(0,C.rA)(),{data:ei}=(0,E.J)(),ed=(0,C.i9)(),el=(0,I.o)(),[eu,ec]=(0,T.useState)(!1),[,em]=(0,U.p)(t)||[],{eligibilityCurrency:ep,debitableIdentifier:ey}=K,ef=(0,M.Jz)()||(0,F.vb)(),{checkGate:eh,getDynamicConfig:eC}=(0,x.U)(),eN=eh(s.M5),eg=(0,T.useMemo)(()=>H??{...(0,p.eO)(e,S),...Y?{seatCount:Y}:{}},[H,S,e,Y]),eb=eg?.id,{asPath:ew}=(0,z.useRouter)(),ev=(0,O.wb)({prices:eg?.prices??{},name:eg?.name,forceLocaleCurrency:ea}),{data:eP}=(0,v.$)({shouldFetch:!!ed}),eO=N({asset:t,productName:eg.name}),ek=h||eg.couponCode,e_=(0,k.Rt)({cookies:void 0,signUpView:void 0,queryParams:{landing_page:(0,w.$)({couponCode:ek,productId:eb,vatNumber:j,seatCount:eg?.seatCount,doNotRedirect:!0,asset:en||W?t:void 0,existingUserRedirect:G||em,license:J,additionalGenerateCheckoutParams:ee,promotions:eg?.promotions}),...q&&{preset:q}}}),eA=(0,T.useCallback)(()=>{window&&(L.A.set(n.uc,ew),window.NREUM?.addPageAction?.("UP3-1623 assign loggedOutHandler authRedirectPath to href",{...window.location||{},asPath:ew,authRedirectPath:e_}),window.location.href=e_)},[ew,e_]),eI=(0,m.Z5)({paymentProfiles:eP}),eE=(0,T.useCallback)(e=>{let t={createTime:es?.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:ei?.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:es?.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:es?.id,username:es?.username,isLicenseDrawer:V};window.NREUM?.noticeError?.(e,t)},[ei,es,V]),eM=(0,P.J)({additionalQueryParams:{...ee,...er&&{checkoutAction:er}},couponCode:ek}),eU=(0,A.h)(),[ex,eS]=(0,T.useState)({status:"",error:void 0}),eR=(0,T.useCallback)(async()=>{try{if(Z?.({status:"",error:void 0}),eS({status:"",error:void 0}),ec(!0),eP){let e=t?{assets:[{asset:t,selectedAssetSize:(0,c.aZ)({assetType:(0,f.f0)(t),assetSize:r})}]}:{},n=[];n.push({...e,product:eg,productType:R});let l=eg.name===a.rVp,u=eh(s.gx),p=l&&u?(0,g.l)(d.ju[a.rVp]):void 0,h=(0,y.N)({productNames:[eg.name],config:eC(s.sC)}),C=h?.promotionValue;null!=Q&&null!=X&&n.push({product:{id:D(),type:"products"},cancellationReason:Q,subscriptionIdentifier:X});let{headers:N}=(0,b.H)({trackingId:ef,headers:{[i.DF]:el}})||{},{data:w}=await (0,m.fS)({country:eo,currency:ep||ev,paymentProfileId:eI?.paymentId,orderItems:n,selectedShadowsOption:$,vatNumber:j,couponCode:ek,promotions:eg?.promotions??C??p,license:J,debitableIdentifier:ey,configs:{headers:N},isEligibleForUnlimitedBogoPromotion:eO,isClickToCancelARGateEnabled:eN,isFootageSelect:!!t&&(0,f.ex)(t)});eU({actionName:"convert - order creation success",customAttributes:{productName:eg.name,productType:R,country:eo,currency:ep||ev,assetType:(0,f.f0)(t),assetSize:r,license:J,isLicenseDrawer:V,orderFlow:et,couponCode:ek,orderId:w.id}}),Z?.({status:o.qO,error:void 0}),eS({status:o.qO,error:void 0}),ec(!1),eM({orderId:w.id})}ec(!1)}catch(e){Z?.({status:o.Nz,error:e}),eS({status:o.Nz,error:e}),ec(!1),e?.detail?.toLowerCase()===l.s_&&B?.(!0),eE(e)}},[Z,eP,t,r,eg,R,eh,eC,Q,X,ef,el,eo,ep,ev,eI?.paymentId,$,j,ek,J,ey,eO,eN,eU,V,et,eM,eE,B]);return{createOrderHandler:ed?eR:eA,isCreateOrderInProgress:eu,product:eg,orderStatus:ex,createOrderHandlerLoading:ed&&!eP}}},762364:(e,t,r)=>{r.d(t,{N:()=>d});var a=r(732580),o=r(639566),n=function(e){return e.PERCENTAGE="percentage",e.FIXED="fixed",e}(n||{});let s=(e,t,r)=>!(r?.length>0&&r.some(t=>e.includes(t)))&&(!(t?.length>0)||t.some(t=>e.includes(t))),i=(e,t)=>s(t.productNames,e.eligibleProducts,e.excludedProducts),d=({productNames:e,config:t})=>{let r=t.get("promotions",[]);if(!r.length)return;let n={productNames:e};for(let e of r)if(i(e,n)){let{promotionTier:t,...r}=e;return{promotionValue:(0,o.l)([{id:t,model:a.h3,namespace:a._7}]),...r}}}},762705:(e,t,r)=>{r.d(t,{J:()=>c});var a=r(213370),o=r(545875),n=r(500306),s=r(623523),i=r(241607),d=r(859478),l=r(330633);let{shutterstockBaseUrl:u}=(0,s.K)(),c=({couponCode:e,displayInlineCancellationFlow:t,additionalQueryParams:r={}})=>{let s=(0,d.useRouter)(),c=(0,o.Q)(),m=!!c?.current?.isPeacock;return(0,l.useCallback)(({orderId:o})=>{let d=(0,i.BF)({language:s.locale,baseUrl:u,pathname:(0,n.DG)({queryParams:{orderId:o,...r,...s?.query||{},...m&&{isCreativeAiOrder:"true"},...e?{[a.m]:e,[a.AW]:e}:{},...t&&{display:"inlineCancellationFlow"}}})});window.location=d},[e,m,s,t,r])}},800626:(e,t,r)=>{r.d(t,{CM:()=>c,FH:()=>f,GA:()=>y,ME:()=>C,YH:()=>N,jj:()=>h,tb:()=>m,zM:()=>p});var a=r(680904),o=r(977474),n=r(28071),s=r(737578),i=r(65776),d=r(678540);let l=({licenses:e,selectedPaymentPlan:t})=>e?.some(({product:e})=>e?.name===t?.product?.name),u=({asset:e,licenses:t})=>{let r=n.xu[e.type];return t?.some(({licenseName:e,product:t})=>(e===s.PtZ[r]||e===s.or1[r]||e===s.MQK[r])&&[...a.XqP,...o.Hg,...o.Gn,a.lcL,a.keR,a.rJW].includes(t?.name||""))},c=({asset:e,licenses:t,selectedPaymentPlan:r})=>l({licenses:t,selectedPaymentPlan:r})||u({asset:e,licenses:t}),m=({licenses:e,licenseTypes:t})=>{let{standard:r,enhanced:a}=t;return e.reduce((e,t)=>{let{licenseName:o}=t;return o===r&&(e.ownsStandardLicense=!0),o===a&&(e.ownsEnhancedLicense=!0),e},{ownsStandardLicense:!1,ownsEnhancedLicense:!1})},p=({subscriptions:e=[],licenseName:t=""})=>e?.some(({license:e,isEligibleForDownload:r})=>e===t&&r),y=(e,t,r)=>(0,i.eO)(e,t[r]),f=({asset:e,ownsStandardLicense:t,ownsEnhancedLicense:r,selectedProductLicenseType:a})=>{let o=n.xu[e.type];return t&&a?.license===s.or1[o]||r&&[s.or1[o],s.PtZ[o]].includes(a?.license||"")},h=({asset:e,selectedPaymentPlan:t,subscriptions:r})=>{let a=n.xu[e.type];return t&&"isPaused"in t?t.isPaused:r?.filter(({license:e})=>e===s.or1[a]||e===s.PtZ[a])?.some(({isPaused:e})=>e)},C=({licenses:e})=>e?.some(({licenseName:e})=>Object.values(s.PtZ).includes(e))??!1,N=(e,t,r)=>(0,d.$9)(e)?s.rTe:[a.ZI1,s.$am].includes(r?.license||"")?s.PtZ[t]:s.or1[t]},816243:(e,t,r)=>{r.d(t,{T:()=>c});var a=r(193581),o=r(498590),n=r(712633),s=r(332546),i=r(648903),d=r(946887),l=r(330633);let u={isEligibleForCon64AnonymousCheckoutExperiment:!1},c=({disableEntryPoint:e=!0}={})=>{let{getExperiment:t}=(0,i.U)(),r=(0,n.i9)(),{anonymousId:c}=(0,s.pn)();return(0,l.useCallback)(()=>{let n=d.A.get(a.g_),s=d.A.get(a.N_),i=d.A.get(a.SG);if(r||e)return u;let l=e=>window.NREUM?.addPageAction(e,{anonymousIdDataLayer:c,anonymousIdCookie:n,wasLoggedIn:s,hasAccountSharedBefore:!!i});if(!n||n!==c)return l("CON-64 - Exclude anonymous users who have a rotating anonymous id"),u;if(s||i)return l("CON-64 - Exclude anonymous users who have previously logged-in"),u;let m=t(o.f.signUpOnCheckout);return{isEligibleForCon64AnonymousCheckoutExperiment:1===Number(m?.get("variant",0))}},[r,e,c,t])}},960608:(e,t,r)=>{r.d(t,{AV:()=>o,BR:()=>m,CU:()=>C,GS:()=>a,J8:()=>N,Ji:()=>l,L2:()=>d,ON:()=>c,R8:()=>n,RD:()=>u,TJ:()=>y,pp:()=>p,u3:()=>f,ye:()=>h,zm:()=>s,zz:()=>i});let a={country:"country",address1:"address1",address2:"address2",city:"city",state:"state",zip:"zip"},o={ccname:"ccname",bin:"bin",lastFour:"lastFour",brand:"brand",encryptedCardNumber:"encryptedCardNumber",encryptedCardType:"encryptedCardType",encryptedExpiryMonth:"encryptedExpiryMonth",encryptedExpiryYear:"encryptedExpiryYear",encryptedSecurityCode:"encryptedSecurityCode"},n={...a,name:"name"},s={ddname:"ddname",ddiban:"ddiban",ddbic:"ddbic"},i="Adyen3DSAuth",d="credit_card",l="direct_debit",u="sepa_direct_debit",c="paypal",m=/^\d{5}(-\d{4})?$/,p="rejected:Declined: CVC Declined",y={[d]:o,[l]:s},f="CA",h=[f],C="shutterstock",N={ORGANIZATION:"organization",CUSTOMER:"customer"}}}]);
//# sourceMappingURL=19321.dbb6e7cfc50a889a.js.map